<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dao.ComputerFailureInfoMapperExt">
    <resultMap id="BaseResultMap" type="com.example.pojo.ComputerFailureInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="computer_failure_id" jdbcType="BIGINT" property="computerFailureId"/>
        <result column="computer_user_id" jdbcType="BIGINT" property="computerUserId"/>
        <result column="computer_user_name" jdbcType="VARCHAR" property="computerUserName"/>
        <result column="store_id" jdbcType="BIGINT" property="storeId"/>
        <result column="brand_models" jdbcType="VARCHAR" property="brandModels"/>
        <result column="serve_serial" jdbcType="VARCHAR" property="serveSerial"/>
        <result column="quick_service_code" jdbcType="VARCHAR" property="quickServiceCode"/>
        <result column="failure_information" jdbcType="VARCHAR" property="failureInformation"/>
        <result column="failure_information_detailed" jdbcType="VARCHAR" property="failureInformationDetailed"/>
        <result column="warranty_flag" jdbcType="TINYINT" property="warrantyFlag"/>
        <result column="failure_status" jdbcType="TINYINT" property="failureStatus"/>
        <result column="maintenance_status" jdbcType="TINYINT" property="maintenanceStatus"/>
        <result column="maintenance_engineer_id" jdbcType="BIGINT" property="maintenanceEngineerId"/>
        <result column="maintenance_engineer_name" jdbcType="VARCHAR" property="maintenanceEngineerName"/>
        <result column="maintenance_engineer_contact" jdbcType="VARCHAR" property="maintenanceEngineerContact"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="create_by_user_id" jdbcType="BIGINT" property="createByUserId"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="update_by_user_id" jdbcType="BIGINT" property="updateByUserId"/>
        <result column="delete_flag" jdbcType="TINYINT" property="deleteFlag"/>
    </resultMap>


    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        computer_failure_id, computer_user_id, store_id, brand_models,
        serve_serial, quick_service_code, failure_information, failure_information_detailed,
        warranty_flag, failure_status, maintenance_status, maintenance_engineer_id, maintenance_engineer_name,
        maintenance_engineer_contact, create_time, create_by_user_id, update_time, update_by_user_id,
        delete_flag
    </sql>

    <select id="queryAllPageComputerFailure" parameterType="com.example.param.ComputerFailureParam"
            resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        cui.computer_user_name,
        cfi.brand_models,
        cfi.quick_service_code,
        cfi.warranty_flag,
        cfi.failure_status,
        cfi.maintenance_status
         from computer_user_info cui left join computer_failure_info cfi on cui.computer_user_id = cfi.computer_user_id
        <where>
            <if test="brandModels!=null and brandModels!=''">
                and cfi.brand_models= #{brandModels,jdbcType=VARCHAR}
            </if>
            <if test="quickServiceCode!=null and quickServiceCode!=''">
                and cfi.quick_service_code= #{quickServiceCode,jdbcType=VARCHAR}
            </if>
            <if test="computerUserName!=null and computerUserName!=''">
                and cfi.computer_user_name= #{computerUserName,jdbcType=VARCHAR}
            </if>
            <if test="warrantyFlag!=null and warrantyFlag!=''">
                and cfi.warranty_flag= #{warrantyFlag,jdbcType=TINYINT}
            </if>
            <if test="failureStatus!=null and failureStatus!=''">
                and cfi.failure_status= #{failureStatus,jdbcType=TINYINT}
            </if>
            <if test="maintenanceStatus!=null and maintenanceStatus!=''">
                and cfi.maintenance_status= #{maintenanceStatus,jdbcType=TINYINT}
            </if>
            and cfi.delete_flag=0
        </where>
        order by cfi.create_time desc
    </select>

    <update id="updateComputerFailureInfo" parameterType="com.example.param.UpdateComputerFailureInfoParam">

        update computer_failure_info
        <set>
            <if test="maintenanceStatus != null and maintenanceStatus!=''">
                maintenance_status= #{maintenanceStatus,jdbcType=TINYINT},
            </if>
            <if test="quickServiceCode!=null and quickServiceCode!=''">
                 quick_service_code= #{quickServiceCode,jdbcType=VARCHAR},

            </if>

            <if test="brandModels!=null and brandModels!=''">
                brand_models=#{brandModels,jdbcType=VARCHAR},
            </if>
            <if test="warrantyFlag!=null and warrantyFlag!=''">
                warranty_flag=#{warrantyFlag,jdbcType=TINYINT},
            </if>
            <if test="failureStatus!=null and failureStatus !=''">
                failure_status=#{failureStatus,jdbcType=TINYINT},
            </if>
            <if test="deleteFlag!=null and deleteFlag!=''">
                delete_flag=#{deleteFlag,jdbcType=TINYINT},
            </if>
        </set>
        where 1=1
        <if test="computerFailureId!=null and computerFailureId !=''">
           and   computer_failure_id = #{computerFailureId,jdbcType=BIGINT}
        </if>
    </update>
</mapper>